<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>
  File: README
  
    &mdash; Documentation by YARD 0.8.3
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><div id='filecontents'><h1>Scorched End Audio Library</h1>

<p>Seal is a C library with Ruby binding for audio rendering and manipulation,
such as direction and distance attenuation, the simulation of the Doppler
effect and reverberation, in a 3D space. It is built on top of <a href="http://connect.creativelabs.com/openal/default.aspx">OpenAL</a>, adding support for
audio streaming and audio formats like Ogg Vorbis, MPEG Audio and WAVE.</p>

<h2>Basic Use</h2>

<p>Initialize Seal:</p>

<pre class="code ruby"><code><span class='const'>Seal</span><span class='period'>.</span><span class='id identifier rubyid_startup'>startup</span>

<span class='id identifier rubyid_include'>include</span> <span class='const'>Seal</span>
</code></pre>

<p>Use a source object to represent a sound source, and attach an audio buffer:</p>

<pre class="code ruby"><code><span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='const'>Source</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_source'>source</span><span class='period'>.</span><span class='id identifier rubyid_buffer'>buffer</span> <span class='op'>=</span> <span class='const'>Buffer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>audio.ogg</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
</code></pre>

<p>Change the position of the source:</p>

<pre class="code ruby"><code><span class='id identifier rubyid_source'>source</span><span class='period'>.</span><span class='id identifier rubyid_position'>position</span> <span class='op'>=</span> <span class='int'>3</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>4</span>
</code></pre>

<p>Change the position of the listener (a singleton of Seal::Listener):</p>

<pre class="code ruby"><code><span class='const'>Seal</span><span class='period'>.</span><span class='id identifier rubyid_listener'>listener</span><span class='period'>.</span><span class='id identifier rubyid_position'>position</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span>
</code></pre>

<p>Play the source:</p>

<pre class="code ruby"><code><span class='id identifier rubyid_source'>source</span><span class='period'>.</span><span class='id identifier rubyid_play'>play</span>
</code></pre>

<p>In case of massive audio resource, use of buffer will eat all the memory, so
we can use streams:</p>

<pre class="code ruby"><code><span class='id identifier rubyid_source'>source</span><span class='period'>.</span><span class='id identifier rubyid_stream'>stream</span> <span class='op'>=</span> <span class='const'>Stream</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>background_music.ogg</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
</code></pre>

<p>Make sure to detach the audio from the source before switching from a buffer
to a stream or vice-versa:</p>

<pre class="code ruby"><code>source.buffer = ...

# ...

source.buffer = nil
source.stream = ...

# ...

source.stream = nil
source.buffer = ...
</code></pre>

<p>Apply a reverberation effect to the sound source:</p>

<pre class="code ruby"><code><span class='comment'># Allocate an effect slot and associate a specific reverb object.
</span><span class='id identifier rubyid_slot'>slot</span> <span class='op'>=</span> <span class='const'>EffectSlot</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>Reverb</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>Reverb</span><span class='op'>::</span><span class='const'>Preset</span><span class='op'>::</span><span class='const'>FOREST</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='comment'># Start feeding the slot.
</span><span class='id identifier rubyid_source'>source</span><span class='period'>.</span><span class='id identifier rubyid_feed'>feed</span><span class='lparen'>(</span><span class='id identifier rubyid_slot'>slot</span><span class='comma'>,</span> <span class='int'>0</span><span class='rparen'>)</span>
</code></pre>

<p>Uninitialize Seal:</p>

<pre class="code ruby"><code><span class='id identifier rubyid_seal'>seal</span><span class='period'>.</span><span class='id identifier rubyid_cleanup'>cleanup</span>
</code></pre>

<p>You can find detailed documentations in the header files under <code>include/seal</code>
for each of the modules.</p>

<p>The C interface is very similar to the Ruby binding, except that some of the
Seal objects are abbreviated (but still more verbose than Ruby in general):</p>

<p>src -&gt; Source<br>
buf -&gt; Buffer<br>
rvb -&gt; Reverb<br>
efs -&gt; EffectSlot</p>

<p>For example:</p>

<pre class="code c"><code>seal_src_t src;
seal_buf_t buf;

seal_startup(0);

seal_init_src(&amp;src);
seal_init_buf(&amp;buf);
seal_load2buf(&amp;buf, &quot;audio.ogg&quot;, SEAL_UNKNOWN_FMT);
seal_set_src_buf(&amp;src, &amp;buf);
seal_play_src(&amp;src);

// Wait to hear.
_seal_sleep(3000);

seal_destroy_src(&amp;src);
seal_destroy_buf(&amp;buf);
seal_destroy_efs(&amp;efs);
seal_destroy_rvb(&amp;rvb);
seal_cleanup();
</code></pre>

<h2>Platforms</h2>

<p>Linux, Windows and Mac OS X are officially tested and supported. Seal should
run on all Unix-like operating systems where OpenAL, libogg, libvorbis and
libmpg123 can run, but those platforms are never tested. The Makefiles are
generated specifically for MSVC and GCC (MinGW or native Unix-like systems).</p>

<h2>Installation</h2>

<h3>Prerequisite</h3>

<p>Seal has native dependencies; you need to have OpenAL installed on your system.</p>

<p>You need <a href="http://www.cmake.org/">CMake</a> 2.4 or later to install
<a href="http://kcat.strangesoft.net/openal.html">libopenal</a> as follows:</p>

<pre class="code bash"><code>git clone git://repo.or.cz/openal-soft.git openal-soft
cd openal-soft/build
cmake -DCMAKE_BUILD_TYPE=Release ..
make
make install
</code></pre>

<p>Note: There has been issues compiling OpenAL on some versions of OS X
because LLVM is the default compiler. I haven&#39;t had luck compiling
OpenAL with LLVM, so I explicitly specified GCC instead:</p>

<pre class="code bash"><code>...
CC=/usr/bin/gcc-4.2 cmake -DCMAKE_BUILD_TYPE=Release ..
...
</code></pre>

<p>After OpenAL is installed, you can start building Seal. Seal will dynamically
link OpenAL.</p>

<h3>Install as a Gem (in a sane environment)</h3>

<pre class="code Bash"><code>gem install seal
</code></pre>

<h3>GCC + GNU Make + Unix-like operating systems + UN*X shell</h3>

<p>From Seal directory:</p>

<pre class="code bash"><code>cd make/unix-like
make
</code></pre>

<h3>GCC + GNU Make + MinGW + UN*X shell</h3>

<pre class="code bash"><code>cd make/win32
make
</code></pre>

<h3>MSVC + Microsoft Visual Studio 2010</h3>

<p>use the solution and project files under /msvc.</p>

<h3>Ruby extension</h3>

<pre class="code bash"><code>bundle install
rake compile
</code></pre>

<p>The default output is <code>lib/seal.{so,dll,bundle}</code>, which is a dynamic library
that could be required by Ruby at runtime.</p>

<h2>Demos</h2>

<p>Use <code>rake demo:&lt;demo_name&gt;</code> to run the demos under the <code>demo/</code> directory.</p>

<ul>
<li><p>playback</p>

<p>Basic playback of audio.</p></li>
<li><p>control</p>

<p>Various controls of audio like play, pause, stop.</p></li>
<li><p>pitch</p>

<p>Audio pitch shifting.</p></li>
<li><p>walk</p>

<p>3D audio positioning (attenuation).</p></li>
<li><p>reverb</p>

<p>Audio reverberation. There are lots of built-in reverb presets, but this
demo only simulates a large room in ice palace.</p></li>
</ul>

<h2>Running Tests</h2>

<p>Tests are written on top of the Ruby binding, using <a href="https://github.com/rspec/rspec">RSpec</a>. You need to build Seal as a Ruby extension
to run the tests:</p>

<pre class="code Bash"><code>bundle install
rake compile
rspec
</code></pre>

<h2>Thread Safety</h2>

<p>Seal can be safely used in a multi-threaded environment so long as no Seal
source, buffer or stream instance is accessed by different threads at the
<em>same time</em> , which is similar to libvorbis&#39; thread-safety conditions
described <a href="http://xiph.org/vorbis/doc/vorbisfile/threads.html">here</a>.</p>

<p>Exceptions are the two functions <code>seal_startup</code> and <code>seal_cleanup</code>, which are
<em>NOT</em> thread-safe. Refer to the documentation for these two functions for
details.</p>

<h2>Character Encoding</h2>

<p>UTF-8 should be used to encode the source code or at least the path strings so
that Seal can properly input audio files using paths that contain multi-byte
(Chinese, Japanese, etc.) characters.</p>

<h2>Etymology</h2>

<p>The phrase &quot;Scorched end&quot; (Chinese: 焦尾; Pinyin: Jiao Wei) is a direct
translation of the name of a Guqin[1] existed in China in the second
century CE. The name literally means that one end of the Qin is scorched.</p>

<p>This Qin was found by Cai Yong.[2] According to the &quot;History of the Later
Han&quot;,[3] Cai Yong once heard very loud sound of someone burning Firmiana
simplex[4] wood for cooking and realized that it is a good material for
making Qin soundboards. He then asked for the wood and cut it into a Qin,
and the sound it produced was pleasant to hear as expected. However, one
end of the wood had already been scorched by the time Cai Yong got it,
hence the name &quot;Scorched end&quot;.</p>

<p>Seal was named so with the hope that it will be more useful than it seems
and will be discovered by the right people who need the right tool.</p>

<p>[1] <a href="http://en.wikipedia.org/wiki/Guqin">http://en.wikipedia.org/wiki/Guqin</a><br>
[2] <a href="http://en.wikipedia.org/wiki/Cai_Yong">http://en.wikipedia.org/wiki/Cai_Yong</a><br>
[3] <a href="http://en.wikipedia.org/wiki/History_of_the_Later_Han">http://en.wikipedia.org/wiki/History_of_the_Later_Han</a><br>
[4] <a href="http://en.wikipedia.org/wiki/Firmiana_simplex">http://en.wikipedia.org/wiki/Firmiana_simplex</a>  </p>
</div></div>

    <div id="footer">
  Generated on Wed Dec 26 21:20:53 2012 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.3 (ruby-1.9.3).
</div>

  </body>
</html>